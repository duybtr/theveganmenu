<html>
<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'></body>
    <h1>Hello World!</h1>
    <input id="userLng" value="" type="hidden" />
    <input id="userLat" value="" type="hidden" /> 
</body>
<script>
    // if (navigator.geolocation) {
    //     navigator.geolocation.getCurrentPosition(
    //         (position) => {
    //             const pos = {
    //                 lat: position.coords.latitude,
    //                 lng: position.coords.longitude,
    //             };
    //             $('#userLng').val(pos.lng);
    //             $('#userLat').val(pos.lat);
    //         }
    //     );
    // } 

    async function fetchText(url, headers, body) {
        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: headers,
                body: body
            });
            if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
            }
            const text = await response.text();
            console.log(text);
        } catch (e) {
            console.error(e);
        }
    }

    const myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");
    myHeaders.append("Authorization", "Bearer ya29.a0ARW5m75FJGy-z8xZT2PYWTXMRV1MECtS9I0iXIWf90rrmrmXacF07YjVNzwFuK7YY4cRDYddTc-JFPCdRaMxZ16YQ_zfG-daWk3c4UqiwBF-IXtjekp0xkf356JRj0xqBrn4Ig6w_0VaS5gNZXcM0b2Y4CsmBUWlsfkbddyukgaCgYKAYsSARASFQHGX2MiIjsKg6NSbxGGmSAzjmIwpQ0177");
    myHeaders.append("X-Goog-User-Project", "veganapp-446321");
    myHeaders.append("X-Goog-FieldMask", "places.displayName,places.formattedAddress");

    const body =  {
                    "includedTypes": ["restaurant"],
                    "maxResultCount": 10,
                    "locationRestriction": {
                        "circle": {
                        "center": {
                            "latitude": 37.7937,
                            "longitude": -122.3965},
                        "radius": 500.0
                        }
                    }
                  }
    const url = 'https://places.googleapis.com/v1/places:searchNearby';
    fetchText(url, myHeaders, body);
    
</script>
<script src="https://unpkg.com/htmx.org@1.9.2" integrity="sha384-L6OqL9pRWyyFU3+/bjdSri+iIphTN/bvYyM37tICVyOJkWZLpP2vGn6VUEXgzg6h" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="  crossorigin="anonymous"></script>
</html> 